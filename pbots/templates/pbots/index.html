{% extends 'lilium/base.html' %}
{% comment %}
pbots/index.html
~~~~~~~~~~~~~~~~

PBOTS dashboard, listing all scraping data sources, their last executions
and its status.

:copyright: (c) 2018 Paolo Paolo Bernardi.
:license: GNU AGPL version 3, see LICENSE for more details.
{% endcomment %}
{% load staticfiles %}

{% block title %}PBOTS{% endblock %}

{% block navigation %}
    {% with "pbots" as navigation %}
        {{ block.super }}
    {% endwith %}
{% endblock %}

{% block main %}
    <table id="status-table" class="table table-striped table-hover table-borderless table-responsive-md">
        <thead class="thead-light">
        <tr>
            <th>Name</th>
            <th>Running?</th>
            <th>Started at</th>
            <th>Finished at</th>
            <th>Executions</th>
            <th>&nbsp;</th>
        </tr>
        </thead>
        <tbody>
        <!-- to be filled via JavaScript -->
        </tbody>
    </table>

    <!-- Modal -->
    <div class="modal fade" id="ajaxModal" tabindex="-1" role="dialog" aria-labelledby="ajaxModalLabel"
         aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="ajaxModalLabel">PBOTS</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    ...
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block javascript %}
    <script src="{% static 'js/pbots/index.js' %}"></script>
    <script>
        var url_status = "{% url 'pbots:api_status' %}";
        var template_url_run = "{% url 'pbots:api_run' 0 %}";
        var template_url_stop = "{% url 'pbots:api_stop' 0 %}";
        init_pbots_index(url_status, template_url_run, template_url_stop);
    </script>
{% endblock %}